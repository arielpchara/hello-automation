{"version":3,"sources":["Bedroom.tsx","components/Gouge.tsx","pages/Monitor/Monitor.tsx","Router.tsx","App.tsx","index.tsx"],"names":["Light","styled","button","state","Center","div","stat","client","connect","Bedroom","useState","setState","useEffect","subscribe","on","topic","payload","console","log","toString","publish","handleClick","useCallback","undefined","onClick","defaultOptions","animDuration","showValue","initialValue","max","Gouge","props","gaugeEl","useRef","gaugeRef","current","options","SvgGauge","setValue","value","setValueAnimated","ref","className","Dash","Box","Monitor","useMemo","currentload","load","setLoad","available","total","mem","setMem","main","temp","setTemp","JSON","parse","label","v","toFixed","Router","exact","path","component","App","ReactDOM","render","document","getElementById"],"mappings":"8oBAIA,IAAMA,EAAQC,IAAOC,OAAV,KAEK,kBAA+B,OAA/B,EAAGC,MAAmC,SAAW,UAY3DC,EAASH,IAAOI,IAAV,KAQNC,EAAO,oBAGPC,EAASC,kBAAQ,2BAEhB,SAASC,IAAW,IAAD,EACEC,qBADF,mBACjBP,EADiB,KACVQ,EADU,KAExBC,qBAAU,WACRL,EAAOM,UAAUP,GACjBC,EAAOO,GAAG,WAAW,SAACC,EAAOC,GAC3BC,QAAQC,IAAIH,EAAOC,GACfV,IAASS,GACXJ,EAASK,EAAQG,eAGrBZ,EAAOa,QAAQ,oBAAqB,MACnC,IACH,IAAMC,EAAcC,uBAAY,WAC9Bf,EAAOa,QAjBE,oBAiBY,YACpB,IACH,OACE,kBAAChB,EAAD,UACWmB,IAAVpB,EAAsB,kDAAkB,kBAACH,EAAD,CAAOG,MAAOA,EAAOqB,QAASH,GAA9B,aAAsDlB,I,6BCvC7FsB,EAAiB,CACrBC,aAAc,EACdC,WAAW,EACXC,aAAc,EACdC,IAAK,KAGA,SAASC,EAAMC,GACpB,IAAMC,EAAUC,iBAAO,MACjBC,EAAWD,iBAAwB,MASzC,OARArB,qBAAU,WACR,IAAKsB,EAASC,QAAS,CACrB,IAAMC,EAAO,eAAQX,EAAR,GAA2BM,GACxCG,EAASC,QAAUE,IAASL,EAAQG,QAASC,GAC7CF,EAASC,QAAQG,SAASP,EAAMQ,OAAS,GAE3CL,EAASC,QAAQK,iBAAiBT,EAAMQ,MAAO,OAC9C,CAACR,IACG,yBAAKU,IAAKT,EAASU,UAAU,oB,gPCtBtC,IAAMC,EAAO1C,IAAOI,IAAV,KAQJuC,EAAM3C,IAAOI,IAAV,KAOF,SAASwC,IACd,IAAMtC,EAASuC,mBAAQ,kBAAMtC,kBAAQ,6BAA4B,IADzC,EAEAE,mBAAS,CAC/BqC,YAAa,IAHS,mBAEjBC,EAFiB,KAEXC,EAFW,OAKFvC,mBAAS,CAC7BwC,UAAW,EACXC,MAAO,MAPe,mBAKjBC,EALiB,KAKZC,EALY,OASA3C,mBAAS,CAC/B4C,KAAM,EACNzB,IAAK,MAXiB,mBASjB0B,EATiB,KASXC,EATW,KA8BxB,OAjBA5C,qBAAU,WACRL,EAAOM,UAAU,cACjBN,EAAOM,UAAU,aACjBN,EAAOM,UAAU,cACjBN,EAAOO,GAAG,WAAW,SAACC,EAAOC,GACvB,eAAiBD,GACnBkC,EAAQQ,KAAKC,MAAM1C,EAAQG,aAEzB,cAAgBJ,GAClBsC,EAAOI,KAAKC,MAAM1C,EAAQG,aAExB,eAAiBJ,GACnByC,EAAQC,KAAKC,MAAM1C,EAAQG,kBAG9B,CAACZ,IAEG,kBAACoC,EAAD,KACL,kBAACC,EAAD,KACE,kBAACd,EAAD,CAAOS,MAAOS,EAAKD,YAAaY,MAAO,SAACC,GAAD,gBAAkBA,EAAEC,QAAQ,GAA5B,SAEzC,kBAACjB,EAAD,KACE,kBAACd,EAAD,CAAOS,MAAOa,EAAIF,UAAYE,EAAID,MAAQ,IAAKQ,MAAO,SAACC,GAAD,gBAAkBA,EAAEC,QAAQ,GAA5B,SAExD,kBAACjB,EAAD,KACE,kBAACd,EAAD,CAAOS,MAAOgB,EAAKD,KAAMzB,IAAK0B,EAAK1B,QCpDlC,SAASiC,IACd,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAWxD,IACjC,kBAAC,IAAD,CAAOuD,KAAK,WAAWC,UAAWpB,MCH3BqB,MAJf,WACE,OAAO,kBAACJ,EAAD,OCDTK,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.3fbca6ab.chunk.js","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport { connect } from \"mqtt\";\n\nconst Light = styled.button<{ state: string }>`\n  border: none;\n  background: ${({ state }: any) => (state === \"ON\" ? \"orange\" : \"grey\")};\n  padding: 2em;\n  border-radius: 50%;\n  width: 100px;\n  height: 100px;\n  outline: none;\n  opacity: 0.75;\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst Center = styled.div`\n  display: flex;\n  height: 100vh;\n  width: 100vw;\n  align-items: center;\n  justify-content: center;\n`\n\nconst stat = \"stat/quarto/POWER\";\nconst cmnd = \"cmnd/quarto/POWER\";\n\nconst client = connect(`ws://192.168.0.104:1884`);\n\nexport function Bedroom() {\n  const [state, setState] = useState();\n  useEffect(() => {\n    client.subscribe(stat);\n    client.on(\"message\", (topic, payload: string) => {\n      console.log(topic, payload)\n      if (stat === topic) {\n        setState(payload.toString());\n      }\n    });\n    client.publish('cmnd/quarto/POWER', '')\n  }, []);\n  const handleClick = useCallback(() => {\n    client.publish(cmnd, 'TOGGLE')\n  }, [])\n  return (\n    <Center>\n    {state === undefined ? <>loading...</> : <Light state={state} onClick={handleClick}>Light is: {state}</Light>}\n    </Center>\n  )\n}\n\n\n","import React, {useRef, useEffect} from 'react'\n\nimport SvgGauge from 'svg-gauge'\n\ninterface GougeProps {\n  value: number\n  [key: string]: any\n}\n\nconst defaultOptions = {\n  animDuration: 1,\n  showValue: true,\n  initialValue: 0,\n  max: 100\n};\n\nexport function Gouge(props: GougeProps) {\n  const gaugeEl = useRef(null);\n  const gaugeRef = useRef<typeof SvgGauge>(null);\n  useEffect(() => {\n    if (!gaugeRef.current) {\n      const options = { ...defaultOptions, ...props };\n      gaugeRef.current = SvgGauge(gaugeEl.current, options);\n      gaugeRef.current.setValue(props.value || 0);\n    }\n    gaugeRef.current.setValueAnimated(props.value, 1.5);\n  }, [props]);\n  return <div ref={gaugeEl} className=\"gauge-container\" />\n}","import React, { useState, useMemo, useEffect } from 'react'\nimport { connect } from \"mqtt\";\nimport styled from 'styled-components';\nimport { Gouge } from '../../components/Gouge';\n\nconst Dash = styled.div`\n  display: flex;\n`\n\n// const Label = styled.div`\n//   text-align: center;\n// `\n\nconst Box = styled.div`\n  width: 150px;\n  height: 150px;\n  display: flex;\n  flex-direction: column;\n`\n\nexport function Monitor() {\n  const client = useMemo(() => connect('ws://192.168.0.111:1884'), [])\n  const [load, setLoad] = useState({\n    currentload: 0,\n  })\n  const [mem, setMem] = useState({\n    available: 0,\n    total: 100\n  })\n  const [temp, setTemp] = useState({\n    main: 0,\n    max: 100\n  })\n  useEffect(() => {\n    client.subscribe('board/load');\n    client.subscribe('board/mem');\n    client.subscribe('board/temp');\n    client.on('message', (topic, payload) => {\n      if ('board/load' === topic) {\n        setLoad(JSON.parse(payload.toString()));\n      }\n      if ('board/mem' === topic) {\n        setMem(JSON.parse(payload.toString()));\n      }\n      if ('board/temp' === topic) {\n        setTemp(JSON.parse(payload.toString()));\n      }\n    });\n  }, [client])\n\n  return <Dash>\n    <Box>\n      <Gouge value={load.currentload} label={(v: number) => `${v.toFixed(1)}%`}/>\n    </Box>\n    <Box>\n      <Gouge value={mem.available / mem.total * 100} label={(v: number) => `${v.toFixed(1)}%`}/>\n    </Box>\n    <Box>\n      <Gouge value={temp.main} max={temp.max} />\n    </Box>\n  </Dash>\n}","import React from 'react'\nimport {BrowserRouter, Switch, Route} from 'react-router-dom'\nimport { Bedroom } from './Bedroom'\nimport { Monitor } from './pages'\n\n\nexport function Router() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route exact path=\"/\" component={Bedroom} />\n        <Route path=\"/monitor\" component={Monitor} />\n      </Switch>\n    </BrowserRouter>\n  )\n}","import React from 'react'\n\nimport { Router } from './Router';\n\nfunction App() {\n  return <Router />\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}